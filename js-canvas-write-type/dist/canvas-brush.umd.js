
/**
 * @description: canvas写字，支持刷子引入
 * @author: liejiayong(809206619@qq.com)
 * @Date: 2022-01-15 11:58:49
 * @LastEditTime: 2022-01-15 17:18:55
 * 在线压缩网站：https://rollupjs.org/repl/
 */

    var CanvasBrush=function(){"use strict";function n(){var t=[];return t.item=function(t){return this[t]||null},t.identifiedTouch=function(t){return this[t+1]||null},t}function t(i){return function(t){var e,n,r;"mousedown"===t.type&&(c=!0),"mouseup"===t.type&&(c=!1),"mousemove"===t.type&&!c||(null==(u="mousedown"===t.type||!u||u&&!u.dispatchEvent?t.target:u).closest("[data-no-touch-simulate]")&&(e=i,n=t,(r=document.createEvent("Event")).initEvent(e,!0,!0),r.altKey=n.altKey,r.ctrlKey=n.ctrlKey,r.metaKey=n.metaKey,r.shiftKey=n.shiftKey,r.touches=s(n),r.targetTouches=s(n),r.changedTouches=o(n),u.dispatchEvent(r)),"mouseup"===t.type&&(u=null))}}function o(t){var e=n();return e.push(new a(u,1,t,0,0)),e}function s(t){return"mouseup"===t.type?n():o(t)}function e(){window.addEventListener("mousedown",t("touchstart"),!0),window.addEventListener("mousemove",t("touchmove"),!0),window.addEventListener("mouseup",t("touchend"),!0)}var u,a,c;"undefined"!=typeof window&&(U="ontouchstart"in window,document.createTouch||(document.createTouch=function(t,e,n,r,i,o,s){return new a(e,n,{pageX:r,pageY:i,screenX:o,screenY:s,clientX:r-window.pageXOffset,clientY:i-window.pageYOffset},0,0)}),document.createTouchList||(document.createTouchList=function(){for(var t=n(),e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length=arguments.length,t}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e}while(null!==(e=e.parentElement||e.parentNode)&&1===e.nodeType);return null}),c=!(a=function(t,e,n,r,i){r=r||0,i=i||0,this.identifier=e,this.target=t,this.clientX=n.clientX+r,this.clientY=n.clientY+i,this.screenX=n.screenX+r,this.screenY=n.screenY+i,this.pageX=n.pageX+r,this.pageY=n.pageY+i}),e.multiTouchOffset=75,U||e());var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function h(t,e){return t(e={exports:{}},e.exports),e.exports}var l=h(function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports});i(l);var f=h(function(t){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],s=!0,u=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(t){u=!0,i=t}finally{try{s||null==n.return||n.return()}finally{if(u)throw i}}return o}},t.exports.__esModule=!0,t.exports.default=t.exports});i(f);var p=h(function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports});i(p);var d=h(function(t){t.exports=function(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports});i(d);var g=h(function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports});i(g);function y(t){return t&&t.Math==Math&&t}function v(e,n){try{_(j,e,{value:n,configurable:!0,writable:!0})}catch(t){j[e]=n}return n}function b(t){try{return!!t()}catch(t){return!0}}function m(t){if(null==t)throw k("Can't call method on "+t);return t}function x(t){return F(m(t))}function w(t){return"Symbol("+(void 0===t?"":t)+")_"+G(++D+Y,36)}function S(t,e){return arguments.length<2?(n=j[t],N(n)?n:void 0):j[t]&&j[t][e];var n}function E(t){var e;return B(q,t)&&(K||"string"==typeof q[t])||(e="Symbol."+t,K&&B(H,t)?q[t]=H[t]:q[t]=(W&&$?$:V)(e)),q[t]}var O=i(h(function(t){t.exports=function(t,e){return l(t)||f(t,e)||d(t,e)||g()},t.exports.__esModule=!0,t.exports.default=t.exports})),j=y("object"==typeof globalThis&&globalThis)||y("object"==typeof window&&window)||y("object"==typeof self&&self)||y("object"==typeof r&&r)||function(){return this}()||Function("return this")(),_=Object.defineProperty,P=j["__core-js_shared__"]||v("__core-js_shared__",{}),T=h(function(t){(t.exports=function(t,e){return P[t]||(P[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.20.3",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})}),M=!b(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),C=Function.prototype,I=C.bind,R=C.call,z=M&&I.bind(R,R),A=M?function(t){return t&&z(t)}:function(t){return t&&function(){return R.apply(t,arguments)}},k=j.TypeError,F=j.Object,L=A({}.hasOwnProperty),B=Object.hasOwn||function(t,e){return L(x(t),e)},D=0,Y=Math.random(),G=A(1..toString),N=function(t){return"function"==typeof t},U=S("navigator","userAgent")||"",r=j.process,C=j.Deno,I=r&&r.versions||C&&C.version,r=I&&I.v8,X=Lt=!(Lt=r?0<(it=r.split("."))[0]&&it[0]<4?1:+(it[0]+it[1]):Lt)&&U&&(!(it=U.match(/Edge\/(\d+)/))||74<=it[1])&&(it=U.match(/Chrome\/(\d+)/))?+it[1]:Lt,K=!!Object.getOwnPropertySymbols&&!b(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&X&&X<41}),W=K&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,q=T("wks"),H=j.Symbol,$=H&&H.for,V=W?H:H&&H.withoutSetter||w,C={};C[E("toStringTag")]="z";function J(t){return"object"==typeof t?null!==t:N(t)}function Q(t){return nt?et.createElement(t):{}}function Z(t){try{return pt(t)}catch(t){return"Object"}}function tt(t,e){return null==(e=t[e])?void 0:gt(e)}var I="[object z]"===String(C),r=!b(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),et=j.document,nt=J(et)&&J(et.createElement),rt=!r&&!b(function(){return 7!=Object.defineProperty(Q("div"),"a",{get:function(){return 7}}).a}),it=r&&b(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),ot=j.String,st=j.TypeError,ut=function(t){if(J(t))return t;throw st(ot(t)+" is not an object")},at=Function.prototype.call,ct=M?at.bind(at):function(){return at.apply(at,arguments)},ht=A({}.isPrototypeOf),lt=j.Object,ft=W?function(t){return"symbol"==typeof t}:function(t){var e=S("Symbol");return N(e)&&ht(e.prototype,lt(t))},pt=j.String,dt=j.TypeError,gt=function(t){if(N(t))return t;throw dt(Z(t)+" is not a function")},yt=j.TypeError,vt=j.TypeError,bt=E("toPrimitive"),mt=function(t){t=function(t,e){if(!J(t)||ft(t))return t;var n=tt(t,bt);if(n){if(n=ct(n,t,e=void 0===e?"default":e),!J(n)||ft(n))return n;throw vt("Can't convert object to primitive value")}return function(t,e){var n,r;if("string"===e&&N(n=t.toString)&&!J(r=ct(n,t)))return r;if(N(n=t.valueOf)&&!J(r=ct(n,t)))return r;if("string"!==e&&N(n=t.toString)&&!J(r=ct(n,t)))return r;throw yt("Can't convert object to primitive value")}(t,e=void 0===e?"number":e)}(t,"string");return ft(t)?t:t+""},xt=j.TypeError,wt=Object.defineProperty,St=Object.getOwnPropertyDescriptor,Et={f:r?it?function(t,e,n){var r;return ut(t),e=mt(e),ut(n),"function"==typeof t&&"prototype"===e&&"value"in n&&"writable"in n&&!n.writable&&(r=St(t,e))&&r.writable&&(t[e]=n.value,n={configurable:("configurable"in n?n:r).configurable,enumerable:("enumerable"in n?n:r).enumerable,writable:!1}),wt(t,e,n)}:wt:function(t,e,n){if(ut(t),e=mt(e),ut(n),rt)try{return wt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw xt("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Ot=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},jt=r?function(t,e,n){return Et.f(t,e,Ot(1,n))}:function(t,e,n){return t[e]=n,t},_t=A(Function.toString);N(P.inspectSource)||(P.inspectSource=function(t){return _t(t)});function Pt(t){return Bt[t]||(Bt[t]=w(t))}var Tt,Mt,Ct,It,Rt,zt,At,kt,Ft=P.inspectSource,U=j.WeakMap,Lt=N(U)&&/native code/.test(Ft(U)),Bt=T("keys"),Dt={},Yt=j.TypeError,C=j.WeakMap;At=Lt||P.state?(Tt=P.state||(P.state=new C),Mt=A(Tt.get),Ct=A(Tt.has),It=A(Tt.set),Rt=function(t,e){if(Ct(Tt,t))throw new Yt("Object already initialized");return e.facade=t,It(Tt,t,e),e},zt=function(t){return Mt(Tt,t)||{}},function(t){return Ct(Tt,t)}):(kt=Pt("state"),Dt[kt]=!0,Rt=function(t,e){if(B(t,kt))throw new Yt("Object already initialized");return e.facade=t,jt(t,kt,e),e},zt=function(t){return B(t,kt)?t[kt]:{}},function(t){return B(t,kt)});function Gt(t){return Wt(Kt(t),8,-1)}var Nt={set:Rt,get:zt,has:At,enforce:function(t){return At(t)?zt(t):Rt(t,{})},getterFor:function(n){return function(t){var e;if(!J(t)||(e=zt(t)).type!==n)throw Yt("Incompatible receiver, "+n+" required");return e}}},U=Function.prototype,Lt=r&&Object.getOwnPropertyDescriptor,C=B(U,"name"),Ut={EXISTS:C,PROPER:C&&"something"===function(){}.name,CONFIGURABLE:C&&(!r||Lt(U,"name").configurable)},Xt=h(function(t){var a=Ut.CONFIGURABLE,e=Nt.get,c=Nt.enforce,h=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet,u=r&&void 0!==r.name?r.name:e;N(n)&&("Symbol("===String(u).slice(0,7)&&(u="["+String(u).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!B(n,"name")||a&&n.name!==u)&&jt(n,"name",u),(r=c(n)).source||(r.source=h.join("string"==typeof u?u:""))),t!==j?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:jt(t,e,n)):o?t[e]=n:v(e,n)})(Function.prototype,"toString",function(){return N(this)&&e(this).source||Ft(this)})}),Kt=A({}.toString),Wt=A("".slice),qt=E("toStringTag"),Ht=j.Object,$t="Arguments"==Gt(function(){return arguments}()),Vt=I?Gt:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Ht(t),qt))?t:$t?Gt(e):"Object"==(t=Gt(e))&&N(e.callee)?"Arguments":t};I||Xt(Object.prototype,"toString",I?{}.toString:function(){return"[object "+Vt(this)+"]"},{unsafe:!0});function Jt(t){return pe(m(t))}function Qt(t,e){return(t=be(t))<0?me(t+e,0):xe(t,e)}function Zt(t){return Se(t.length)}function te(u){return function(t,e,n){var r,i=Jt(t),o=Zt(i),s=Qt(n,o);if(u&&e!=e){for(;s<o;)if((r=i[s++])!=r)return!0}else for(;s<o;s++)if((u||s in i)&&i[s]===e)return u||s||0;return!u&&-1}}function ee(t,e){var n,r=Jt(t),i=0,o=[];for(n in r)!B(Dt,n)&&B(r,n)&&Oe(o,n);for(;e.length>i;)B(r,n=e[i++])&&(~Ee(o,n)||Oe(o,n));return o}function ne(t,e){return(t=ze[Re(t)])==ke||t!=Ae&&(N(e)?b(e):!!e)}function re(t,e){var n,r,i,o,s=t.target,u=t.global,a=t.stat;if(n=u?j:a?j[s]||v(s,{}):(j[s]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(o=Le(n,r))&&o.value:n[r],!Fe(u?r:s+(a?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;!function(t,e,n){for(var r=Ce(e),i=Et.f,o=ge.f,s=0;s<r.length;s++){var u=r[s];B(t,u)||n&&B(n,u)||i(t,u,o(e,u))}}(i,o)}(t.sham||o&&o.sham)&&jt(i,"sham",!0),Xt(n,r,i,t)}}function ie(t){if("Symbol"===Vt(t))throw TypeError("Cannot convert a Symbol value to a string");return Be(t)}function oe(){var t=ut(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}function se(){}function ue(t){t.write(Xe("")),t.close();var e=t.parentWindow.Object;return t=null,e}var ae,U={}.propertyIsEnumerable,ce=Object.getOwnPropertyDescriptor,he={f:ce&&!U.call({1:2},1)?function(t){t=ce(this,t);return!!t&&t.enumerable}:U},le=j.Object,fe=A("".split),pe=b(function(){return!le("z").propertyIsEnumerable(0)})?function(t){return"String"==Gt(t)?fe(t,""):le(t)}:le,de=Object.getOwnPropertyDescriptor,ge={f:r?de:function(t,e){if(t=Jt(t),e=mt(e),rt)try{return de(t,e)}catch(t){}if(B(t,e))return Ot(!ct(he.f,t,e),t[e])}},ye=Math.ceil,ve=Math.floor,be=function(t){t=+t;return t!=t||0==t?0:(0<t?ve:ye)(t)},me=Math.max,xe=Math.min,we=Math.min,Se=function(t){return 0<t?we(be(t),9007199254740991):0},Ee=(te(!0),te(!1)),Oe=A([].push),je=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],_e=je.concat("length","prototype"),Pe={f:Object.getOwnPropertyNames||function(t){return ee(t,_e)}},Te={f:Object.getOwnPropertySymbols},Me=A([].concat),Ce=S("Reflect","ownKeys")||function(t){var e=Pe.f(ut(t)),n=Te.f;return n?Me(e,n(t)):e},Ie=/#|\.prototype\./,Re=ne.normalize=function(t){return String(t).replace(Ie,".").toLowerCase()},ze=ne.data={},Ae=ne.NATIVE="N",ke=ne.POLYFILL="P",Fe=ne,Le=ge.f,Be=j.String,De=j.RegExp,I=b(function(){var t=De("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),U=I||b(function(){return!De("a","y").sticky}),U={BROKEN_CARET:I||b(function(){var t=De("^r","gy");return t.lastIndex=2,null!=t.exec("str")}),MISSED_STICKY:U,UNSUPPORTED_Y:I},Ye=Object.keys||function(t){return ee(t,je)},Ge={f:r&&!it?Object.defineProperties:function(t,e){ut(t);for(var n,r=Jt(e),i=Ye(e),o=i.length,s=0;s<o;)Et.f(t,n=i[s++],r[n]);return t}},Ne=S("document","documentElement"),Ue=Pt("IE_PROTO"),Xe=function(t){return"<script>"+t+"<\/script>"},Ke=function(){try{ae=new ActiveXObject("htmlfile")}catch(t){}var t,e;Ke="undefined"==typeof document||document.domain&&ae?ue(ae):((e=Q("iframe")).style.display="none",Ne.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Xe("document.F=Object")),t.close(),t.F);for(var n=je.length;n--;)delete Ke.prototype[je[n]];return Ke()};Dt[Ue]=!0;var We=Object.create||function(t,e){var n;return null!==t?(se.prototype=ut(t),n=new se,se.prototype=null,n[Ue]=t):n=Ke(),void 0===e?n:Ge.f(n,e)},qe=j.RegExp,I=b(function(){var t=qe(".","s");return!t.dotAll||!t.exec("\n")||"s"!==t.flags}),He=j.RegExp,r=b(function(){var t=He("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}),$e=Nt.get,Ve=T("native-string-replace",String.prototype.replace),Je=RegExp.prototype.exec,Qe=Je,Ze=A("".charAt),tn=A("".indexOf),en=A("".replace),nn=A("".slice),rn=(it=/b*/g,ct(Je,T=/a/,"a"),ct(Je,it,"a"),0!==T.lastIndex||0!==it.lastIndex),on=U.BROKEN_CARET,sn=void 0!==/()??/.exec("")[1],un=Qe=rn||sn||on||I||r?function(t){var e,n,r,i,o,s,u=this,a=$e(u),c=ie(t),h=a.raw;if(h)return h.lastIndex=u.lastIndex,p=ct(Qe,h,c),u.lastIndex=h.lastIndex,p;var l=a.groups,f=on&&u.sticky,t=ct(oe,u),h=u.source,p=0,a=c;if(f&&(t=en(t,"y",""),-1===tn(t,"g")&&(t+="g"),a=nn(c,u.lastIndex),0<u.lastIndex&&(!u.multiline||u.multiline&&"\n"!==Ze(c,u.lastIndex-1))&&(h="(?: "+h+")",a=" "+a,p++),e=new RegExp("^(?:"+h+")",t)),sn&&(e=new RegExp("^"+h+"$(?!\\s)",t)),rn&&(n=u.lastIndex),r=ct(Je,f?e:u,a),f?r?(r.input=nn(r.input,p),r[0]=nn(r[0],p),r.index=u.lastIndex,u.lastIndex+=r[0].length):u.lastIndex=0:rn&&r&&(u.lastIndex=u.global?r.index+r[0].length:n),sn&&r&&1<r.length&&ct(Ve,r[0],e,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r&&l)for(r.groups=o=We(null),i=0;i<l.length;i++)o[(s=l[i])[0]]=r[s[1]];return r}:Qe;re({target:"RegExp",proto:!0,forced:/./.exec!==un},{exec:un});function an(){}function cn(t){if(!N(t))return!1;try{return bn(an,vn,t),!0}catch(t){return!1}}function hn(t){if(!N(t))return!1;switch(Vt(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return wn||!!xn(mn,Ft(t))}catch(t){return!0}}var I=Function.prototype,ln=I.apply,fn=I.call,pn="object"==typeof Reflect&&Reflect.apply||(M?fn.bind(ln):function(){return fn.apply(ln,arguments)}),dn=E("species"),gn=RegExp.prototype,yn=E("match"),vn=[],bn=S("Reflect","construct"),mn=/^\s*(?:class|function)\b/,xn=A(mn.exec),wn=!mn.exec(an);hn.sham=!0;function Sn(o){return function(t,e){var n,r=ie(m(t)),i=be(e),t=r.length;return i<0||t<=i?o?"":void 0:(e=Ln(r,i))<55296||56319<e||i+1===t||(n=Ln(r,i+1))<56320||57343<n?o?Fn(r,i):e:o?Bn(r,i,i+2):n-56320+(e-55296<<10)+65536}}function En(t,e,n){(e=mt(e))in t?Et.f(t,e,Ot(0,n)):t[e]=n}function On(t,e,n){for(var r=Zt(t),i=Qt(e,r),o=Qt(void 0===n?r:n,r),s=Yn(Gn(o-i,0)),u=0;i<o;i++,u++)En(s,u,t[i]);return s.length=u,s}function jn(t,e){var n=t.exec;if(N(n)){n=ct(n,t,e);return null!==n&&ut(n),n}if("RegExp"===Gt(t))return ct(un,t,e);throw Nn("RegExp#exec called on incompatible receiver")}var _n,Pn,Tn,Mn,Cn,In,Rn,zn=!bn||b(function(){var t;return cn(cn.call)||!cn(Object)||!cn(function(){t=!0})||t})?hn:cn,An=j.TypeError,kn=E("species"),Fn=A("".charAt),Ln=A("".charCodeAt),Bn=A("".slice),Dn=(Sn(!1),Sn(!0)),Yn=j.Array,Gn=Math.max,Nn=j.TypeError,Un=U.UNSUPPORTED_Y,Xn=Math.min,Kn=[].push,Wn=A(/./.exec),qn=A(Kn),Hn=A("".slice);_n="split",r=!!b(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};t="ab".split(t);return 2!==t.length||"a"!==t[0]||"b"!==t[1]}),I=Un,In=E(_n),Rn=!b(function(){var t={};return t[In]=function(){return 7},7!=""[_n](t)}),U=Rn&&!b(function(){var t=!1,e=/a/;return(e={constructor:{}}).constructor[dn]=function(){return e},e.flags="",e[In]=/./[In],e.exec=function(){return t=!0,null},e[In](""),!t}),Rn&&U&&!r||(Pn=A(/./[In]),Tn=In,Mn=""[_n],Cn="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(t,e){var n=ie(m(this)),r=void 0===e?4294967295:e>>>0;if(0==r)return[];if(void 0===t)return[n];if(!J(a=t)||!(void 0!==(e=a[yn])?e:"RegExp"==Gt(a)))return ct(Mn,n,t,r);for(var i,o,s,u=[],a=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,h=new RegExp(t.source,a+"g");(i=ct(un,h,n))&&!((o=h.lastIndex)>c&&(qn(u,Hn(n,c,i.index)),1<i.length&&i.index<n.length&&pn(Kn,u,On(i,1)),s=i[0].length,c=o,r<=u.length));)h.lastIndex===i.index&&h.lastIndex++;return c===n.length?!s&&Wn(h,"")||qn(u,""):qn(u,Hn(n,c)),r<u.length?On(u,0,r):u}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:ct(Mn,this,t,e)}:Mn,r=[function(t,e){var n=m(this),r=null==t?void 0:tt(t,Tn);return r?ct(r,t,n,e):ct(Cn,ie(n),t,e)},function(t,e){var n,r,i,o=ut(this),s=ie(t),u=(u=o,n=s,a=e,r=Cn!==Mn,i=A(Cn),(t=u.exec)===un||t===gn.exec?Rn&&!r?{done:!0,value:Pn(u,n,a)}:{done:!0,value:i(n,u,a)}:{done:!1});if(u.done)return u.value;var a=(a=RegExp,void 0===(u=ut(o).constructor)||null==(h=ut(u)[kn])?a:function(t){if(zn(t))return t;throw An(Z(t)+" is not a constructor")}(h)),c=o.unicode,h=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(Un?"g":"y"),l=new a(Un?"^(?:"+o.source+")":o,h),f=void 0===e?4294967295:e>>>0;if(0==f)return[];if(0===s.length)return null===jn(l,s)?[s]:[];for(var p,d,g=0,y=0,v=[];y<s.length;){l.lastIndex=Un?0:y;var b,m=jn(l,Un?Hn(s,y):s);if(null===m||(b=Xn(Se(l.lastIndex+(Un?y:0)),s.length))===g)p=s,y=(d=y)+(c?Dn(p,d).length:1);else{if(qn(v,Hn(s,g,y)),v.length===f)return v;for(var x=1;x<=m.length-1;x++)if(qn(v,m[x]),v.length===f)return v;y=g=b}}return qn(v,Hn(s,g)),v}],Xt(String.prototype,_n,r[0]),Xt(gn,In,r[1])),I&&jt(gn[In],"sham",!0);var r=Date.prototype,$n=A(r.toString),Vn=A(r.getTime);"Invalid Date"!=String(new Date(NaN))&&Xt(r,"toString",function(){var t=Vn(this);return t==t?$n(this):"Invalid Date"});var I=Ut.PROPER,Jn=RegExp.prototype,Qn=Jn.toString,Zn=A(oe),r=b(function(){return"/a/b"!=Qn.call({source:"a",flags:"b"})}),I=I&&"toString"!=Qn.name;(r||I)&&Xt(RegExp.prototype,"toString",function(){var t=ut(this),e=ie(t.source),n=t.flags;return"/"+e+"/"+ie(void 0!==n||!ht(Jn,t)||"flags"in Jn?n:Zn(t))},{unsafe:!0});var tr=Array.isArray||function(t){return"Array"==Gt(t)},er=E("species"),nr=j.Array,rr=E("species"),ir=E("isConcatSpreadable"),or=j.TypeError,r=51<=X||!b(function(){var t=[];return t[ir]=!1,t.concat()[0]!==t}),I=51<=X||!b(function(){var t=[];return(t.constructor={})[rr]=function(){return{foo:1}},1!==t.concat(Boolean).foo});re({target:"Array",proto:!0,forced:!r||!I},{concat:function(t){for(var e,n,r,i,o,s,u=x(this),a=(o=0,tr(i=i=u)&&(s=i.constructor,(zn(s)&&(s===nr||tr(s.prototype))||J(s)&&null===(s=s[er]))&&(s=void 0)),new(void 0===s?nr:s)(0===o?0:o)),c=0,h=-1,l=arguments.length;h<l;h++)if(function(t){if(!J(t))return!1;var e=t[ir];return void 0!==e?!!e:tr(t)}(r=-1===h?u:arguments[h])){if(9007199254740991<c+(n=Zt(r)))throw or("Maximum allowed index exceeded");for(e=0;e<n;e++,c++)e in r&&En(a,c,r[e])}else{if(9007199254740991<=c)throw or("Maximum allowed index exceeded");En(a,c++,r)}return a.length=c,a}});var sr=A([].slice),ur=j.Function,ar=A([].concat),cr=A([].join),hr={},M=M?ur.bind:function(e){var n=gt(this),t=n.prototype,r=sr(arguments,1),i=function(){var t=ar(r,sr(arguments));return this instanceof i?function(t,e,n){if(!B(hr,e)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";hr[e]=ur("C,a","return new C("+cr(r,",")+")")}return hr[e](t,n)}(n,t.length,t):n.apply(e,t)};return J(t)&&(i.prototype=t),i};function lr(t){return"[object Function]"===Object.prototype.toString.call(t)}function fr(t,e){var n=1<arguments.length&&void 0!==e?e:2,e=t.toString().split("."),t=O(e,2),e=t[0],e=void 0===e?"":e,t=t[1],t=(t=void 0===t?"":t).substr(0,n);return+"".concat(e,".").concat(t)}re({target:"Function",proto:!0,forced:Function.bind!==M},{bind:M});function pr(t){var e;(this._self=this).isMoving=!1,this.canvas=document.querySelector(t.el),this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width=0|t.width,this.height=this.canvas.height=0|t.height,this.realWidth=this.canvas.clientWidth,this.realHeight=this.canvas.clientHeight,this.type=t.type,this.ctx.fillStyle=t.fillStyle||"rgba(0,0,0,0.8)",this.radius=t.radius||0,this.lineMax=t.lineMax||20,this.lineMin=t.lineMin||10,this.lineUp=t.lineUp||5,this.history=t.history||!1,this.linePressure=t.linePressure||1,this.smoothness=t.smoothness||80,this.brush=void 0!==(e=t.brush)&&e instanceof HTMLElement&&1===e.nodeType?t.brush:document.querySelector(t.brush),this.brushSize=t.brushSize||20,this.rendBG=t.rendBG||null,this.lastPos={},this.has=[],this.arr=[],this.historyCacheCurrent=[],this.historyCache=[],this.canvas.addEventListener("touchstart",this.downEvent.bind(this),!1),this.canvas.addEventListener("touchmove",this.moveEvent.bind(this),!1),this.canvas.addEventListener("touchend",this.upEvent.bind(this),!1),this.canvas.addEventListener("contextmenu",function(t){t.preventDefault()},!1),this.__initial__()}return pr.prototype.__initial__=function(){this.clear()},pr.prototype.__drawBG=function(){var t=this.width,e=this.height,n={width:.8*t|0,height:.8*e|0};n.top=(e-n.height)/2|0,n.left=(t-n.width)/2|0,n.bottom=n.top+n.height,n.right=n.left+n.width;var r=this.ctx;r.strokeStyle="#e38888",r.beginPath(),r.moveTo(n.left,n.top),r.lineTo(n.right,n.top),r.lineTo(n.right,n.bottom),r.lineTo(n.left,n.bottom),r.closePath(),r.lineWidth=8,r.stroke();e=n.left+(n.width+4)/2,t=n.top+(n.height+4)/2;n.top+=16,n.left+=16,n.bottom-=16,n.right-=16,r.beginPath(),r.moveTo(n.left,t),r.lineTo(n.right,t),r.moveTo(e,n.top),r.lineTo(e,n.bottom),r.closePath(),r.lineWidth=4,r.stroke(),r.beginPath(),r.moveTo(n.left,n.top),r.lineTo(n.right,n.top),r.lineTo(n.right,n.bottom),r.lineTo(n.left,n.bottom),r.closePath(),r.stroke()},pr.prototype.__saveCache=function(t,e,n,r,i){this.history&&this.historyCacheCurrent.push({brush:t,x:e,y:n,width:r,height:i})},pr.prototype.historyBack=function(){if(!this.history)throw new Error("You need to enable the history mode");if(this.historyCache.length){this.ctx.clearRect(0,0,this.width,this.height),lr(this.rendBG)?this.rendBG(this):this.__drawBG(),this.historyCache.pop();var t,e=this.historyCache;for(t in e){var n,r=e[t];for(n in r){var i=r[n];this.ctx.drawImage(i.brush,i.x,i.y,i.width,i.height)}}}},pr.prototype.clear=function(){this.ctx.clearRect(0,0,this.width,this.height),this.arr.length=0,this.historyCache.length=0,this.historyCacheCurrent.length=0,this.has.length=0,this.lastPos={},lr(this.rendBG)?this.rendBG(this):this.__drawBG()},pr.prototype.save=function(){return this.canvas.toDataURL(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"image/png",1<arguments.length&&void 0!==arguments[1]?arguments[1]:1)},pr.prototype.clickEvent=function(t){this.cli=this.getPos(t.touches[0])},pr.prototype.downEvent=function(t){this.isMoving=!0,this.has=[],this.lastPos=this.getPos(t.touches[0]);var e=this.lastPos.x,t=this.lastPos.y;this.arr.unshift({x1:e,y1:t})},pr.prototype.moveEvent=function(t){if(t.preventDefault(),this.isMoving){var e,n=this.getPos(t.touches[0]),r=this.lastPos;this.brushSize;this.has.unshift({time:(new Date).getTime(),dis:this.distance(r,n)});for(var i=0,o=0,s=0;s<this.has.length-1&&(i+=this.has[s].dis,o+=this.has[s].time-this.has[s+1].time,!(i>this.smoothness));s++);t=Math.min(o/i*this.linePressure+this.lineMin,this.lineMax)/2;this.radius=t,this.lastPos=n;for(var u=Math.round(this.has[0].dis/2)+1,a=0;a<u;a++){var c=r.x+(n.x-r.x)/u*a,h=r.y+(n.y-r.y)/u*a;this.ctx.beginPath(),c-=this.brushSize/2,h-=this.brushSize/2,c=fr(c),h=fr(h),e=fr(this.brushSize),this.arr.unshift({x:c,y:h}),this.__saveCache(this.brush,c,h,e,e),this.ctx.drawImage(this.brush,c,h,e,e),this.brushSize=e-.2,this.brushSize<this.lineMin&&(this.brushSize=this.lineMin)}}},pr.prototype.upEvent=function(t){this.isMoving=!1,this.brushSize=this.lineMax;var e,n,r=this.brushSize;if(100<this.arr.length){for(var i=0;i<60;i++)this.arr[i].x=this.arr[i].x-this.brushSize/4,this.arr[i].y=this.arr[i].y-this.brushSize/4,e=fr(this.arr[i].x),n=fr(this.arr[i].y),r=fr(this.brushSize),this.__saveCache(this.brush,e,n,r,r),this.ctx.drawImage(this.brush,e,n,r,r),this.brushSize=this.brushSize-.3,this.brushSize<this.lineUp&&(this.brushSize=this.lineUp);this.brushSize=this.lineMax,this.arr=[]}1==this.arr.length&&(e=this.arr[0].x1-this.brushSize/2,n=this.arr[0].y1-this.brushSize/2,e=fr(e),n=fr(n),r=fr(this.brushSize),this.__saveCache(this.brush,e,n,r,r),this.ctx.drawImage(this.brush,e,n,r,r),this.arr=[]),this.historyCache.push(this.historyCacheCurrent),this.historyCacheCurrent=[]},pr.prototype.getPos=function(t){var e=this.canvas.getBoundingClientRect(),n=t.clientX,t=t.clientY,n=Math.round(n-e.left),e=Math.round(t-e.top);return{x:n*this.width/this.realWidth,y:e*this.height/this.realHeight}},pr.prototype.distance=function(t,e){var n=e.x-t.x,t=e.y-t.y;return Math.sqrt(n*n+t*t)},pr}();
