!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.WaterMark=e():t.WaterMark=e()}(window,function(){return o={},n.m=i=[function(t,e){function i(t,e){(this.constructor=this).container=t||document.body||document.documentElement.querySelector("body"),this.canvas={el:"",width:0,height:0},this.pixelRatio=1,this.WMUrl=null,this._$wm=null,this._wmSty=null,this.options=this._extend(i._DEFAULT,e),this._init()}i.prototype.genWMUrl=function(){var t=this.canvas.el,e=this.canvas.ctx,i=(this.canvas.width,this.canvas.width,this.options),o=i.globalAlpha,n=i.textAlign,r=i.textBaseline,a=i.font,s=i.fillStyle,l=i.rotate,c=i.x,u=i.y,h=i.msg;e.globalAlpha=o,e.textAlign=n,e.textBaseline=r,e.font=a,e.fillStyle=s,e.rotate(Math.PI*l/180),e.fillText(h,c,u),this.WMUrl=t.toDataURL()},i.prototype.addWM=function(){var t=this.options.wmCls,e=document.querySelector(t),i=this._$wm,o=this._wmSty,n=this.container;e?e.style.cssText=o:n.appendChild(i),this._WMObserve()},i.prototype._WMObserve=function(){var e=this,t=this.options,i=this.container,o=t.wmCls,n=this._wmSty;$wm=document.querySelector(o),setTimeout(function(){try{var t=new(window.MutationObserver||window.WebKitMutationObserver)(function(){(!$wm||$wm&&$wm.getAttribute("style")!==n)&&(t.disconnect(),t=null,e.addWM())});t.observe(i,{attributes:!0,subtree:!0,childList:!0})}catch(t){console.warn("window is not support API MutationObserver")}},40)},i.prototype._createWMElement=function(){var t=this.options,e=t.wmCls.substr(1),i=t.zIndex,o=this.WMUrl,n=document.createElement("div"),r="position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:"+i+";background-repeat:repeat;background-image:url('"+o+"');";n.setAttribute("class",e),n.style.cssText=r,this._$wm=n,this._wmSty=r,this.addWM()},i.prototype._createCanvas=function(){var t=document.createElement("canvas"),e=t.getContext("2d"),i=this.options,o=i.width,n=i.height,r=this._getPixelRatio(e),a=o*r,s=n*r;e.scale(r,r),t.setAttribute("width",a),t.setAttribute("height",s),this.pixelRatio=r,this.canvas.el=t,this.canvas.ctx=e,this.canvas.width=a,this.canvas.height=s},i.prototype._init=function(){this._createCanvas(),this.genWMUrl(),this._createWMElement()},i.prototype._getPixelRatio=function(t){var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},i.prototype._extend=function(t,e){e=e||{};var i={};for(var o in t)e.hasOwnProperty(o)?i[o]=e[o]:i[o]=t[o];return i},i._DEFAULT={msg:"内部文档，请勿外传",wmCls:".jy_wm",width:"100",height:"100",textAlign:"left",textBaseline:"bottom",font:"16px Microsoft Yahei",fillStyle:"#000",globalAlpha:.1,rotate:16,zIndex:-1,x:50,y:50},t.exports=i}],n.c=o,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0);function n(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}var i,o});